<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marvel Universe Quiz - Test Your Knowledge</title>
    <link rel="icon" href="../assets/brand/favicon.svg" type="image/svg+xml">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
        }

        .quiz-container {
            background: rgba(255, 255, 255, 0.1);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem;
            max-width: 800px;
            width: 90%;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .quiz-title {
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .quiz-subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 120px;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .question-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        /* Professional Image System */
        .character-image-container {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
        }

        .image-wrapper {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .image-wrapper:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .character-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .loading-spinner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-size: 14px;
            font-weight: 500;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .image-error {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            text-align: center;
            padding: 20px;
        }

        .error-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }

        .retry-btn {
            margin-top: 10px;
            padding: 8px 16px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .retry-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .tier-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .tier-s-plus {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        .tier-s {
            background: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
        }

        .tier-a {
            background: linear-gradient(135deg, #2980b9 0%, #3498db 100%);
        }

        .hd-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 12px;
            color: white;
            font-size: 11px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }

        .hd-indicator.show {
            opacity: 1;
        }

        .camera-icon {
            font-size: 12px;
        }

        /* Character-themed styling */
        .character-theme-iron-man {
            border: 3px solid #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        .character-theme-spider-man {
            border: 3px solid #dc143c;
            box-shadow: 0 0 20px rgba(220, 20, 60, 0.4);
        }

        .character-theme-captain-america {
            border: 3px solid #0052cc;
            box-shadow: 0 0 20px rgba(0, 82, 204, 0.4);
        }

        .character-theme-hulk {
            border: 3px solid #228b22;
            box-shadow: 0 0 20px rgba(34, 139, 34, 0.4);
        }

        .character-theme-thor {
            border: 3px solid #4169e1;
            box-shadow: 0 0 20px rgba(65, 105, 225, 0.4);
        }

        .character-theme-black-widow {
            border: 3px solid #8b0000;
            box-shadow: 0 0 20px rgba(139, 0, 0, 0.4);
        }

        .character-theme-wolverine {
            border: 3px solid #ffa500;
            box-shadow: 0 0 20px rgba(255, 165, 0, 0.4);
        }

        .character-theme-deadpool {
            border: 3px solid #ff0000;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.4);
        }

        .character-theme-doctor-strange {
            border: 3px solid #9932cc;
            box-shadow: 0 0 20px rgba(153, 50, 204, 0.4);
        }

        .character-theme-black-panther {
            border: 3px solid #4b0082;
            box-shadow: 0 0 20px rgba(75, 0, 130, 0.4);
        }

        .question-number {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .question-text {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .answer-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            text-align: left;
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.4);
            transform: translateY(-2px);
        }

        .answer-btn.selected {
            background: rgba(74, 144, 226, 0.3);
            border-color: #4a90e2;
        }

        .answer-btn.correct {
            background: rgba(76, 175, 80, 0.3);
            border-color: #4caf50;
        }

        .answer-btn.incorrect {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }

        .timer-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffeb3b, #f44336);
            transition: width 0.1s linear;
            border-radius: 4px;
        }

        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .btn-primary {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            border-color: #4a90e2;
        }

        .btn-primary:hover {
            background: linear-gradient(45deg, #357abd, #2968a3);
        }

        .results-screen {
            text-align: center;
        }

        .results-score {
            font-size: 3rem;
            color: white;
            margin-bottom: 1rem;
        }

        .results-message {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
        }

        .results-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .start-screen {
            text-align: center;
        }

        .start-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .difficulty-selector {
            margin-bottom: 2rem;
        }

        .difficulty-options {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.selected {
            background: rgba(74, 144, 226, 0.3);
            border-color: #4a90e2;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .quiz-container {
                padding: 1.5rem;
                margin: 1rem;
            }

            .quiz-title {
                font-size: 2rem;
            }

            .answers-grid {
                grid-template-columns: 1fr;
            }

            .game-stats {
                flex-direction: column;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            .difficulty-options {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- Start Screen -->
        <div id="startScreen" class="start-screen">
            <div class="quiz-header">
                <h1 class="quiz-title">🦸‍♂️ Marvel Universe Quiz</h1>
                <p class="quiz-subtitle">Test Your Knowledge of the Marvel Universe</p>
            </div>
            
            <p class="start-description">
                Welcome to the ultimate Marvel Universe quiz! Test your knowledge of superheroes, villains, 
                storylines, and the rich history of Marvel Comics. Choose your difficulty level and see how 
                well you know the Marvel Universe!
            </p>
            
            <div class="difficulty-selector">
                <h3 class="difficulty-heading">Select Difficulty:</h3>
                <div class="difficulty-options">
                    <button class="difficulty-btn selected" data-difficulty="easy">🟢 Easy</button>
                    <button class="difficulty-btn" data-difficulty="medium">🟡 Medium</button>
                    <button class="difficulty-btn" data-difficulty="hard">🔴 Hard</button>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="btn btn-primary" onclick="startQuiz()">🚀 Start Quiz</button>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="hidden">
            <div class="quiz-header">
                <h1 class="quiz-title">🦸‍♂️ Marvel Quiz</h1>
            </div>
            
            <div class="game-stats">
                <div class="stat-item">
                    <div class="stat-label">Question</div>
                    <div class="stat-value" id="questionCounter">1/10</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="currentScore">0</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Time Left</div>
                    <div class="stat-value" id="timeLeft">30s</div>
                </div>
            </div>
            
            <div class="timer-bar">
                <div class="timer-fill" id="timerFill"></div>
            </div>
            
            <div class="question-container">
                <div class="question-number" id="questionNumber">Question 1 of 10</div>
                <div class="character-image-container">
                    <div class="image-wrapper">
                        <div class="loading-spinner" id="imageLoader">
                            <div class="spinner"></div>
                            <span>Loading HD Image...</span>
                        </div>
                        <img id="characterImage" class="character-image" alt="Marvel Character" style="display: none;">
                        <div class="image-error" id="imageError" style="display: none;">
                            <div class="error-icon">📷</div>
                            <span>Image unavailable</span>
                            <button class="retry-btn" onclick="retryImageLoad()">Retry</button>
                        </div>
                        <div class="tier-badge" id="tierBadge"></div>
                        <div class="hd-indicator" id="hdIndicator">
                            <span class="camera-icon">📷</span>
                            <span>HD</span>
                        </div>
                    </div>
                </div>
                <div class="question-text" id="questionText">Loading question...</div>
                
                <div class="answers-grid" id="answersGrid">
                    <!-- Answers will be populated by JavaScript -->
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="btn hidden" onclick="nextQuestion()" id="nextBtn">Next Question →</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div id="resultsScreen" class="results-screen hidden">
            <div class="quiz-header">
                <h1 class="quiz-title">🏆 Quiz Complete!</h1>
            </div>
            
            <div class="results-score" id="finalScore">8/10</div>
            <div class="results-message" id="resultsMessage">Excellent work, True Believer!</div>
            
            <div class="results-details">
                <div class="stat-item">
                    <div class="stat-label">Correct Answers</div>
                    <div class="stat-value" id="correctCount">8</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Accuracy</div>
                    <div class="stat-value" id="accuracy">80%</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Time Taken</div>
                    <div class="stat-value" id="timeTaken">4:32</div>
                </div>
            </div>
            
            <div class="control-buttons">
                <button class="btn btn-primary" onclick="restartQuiz()">🔄 Play Again</button>
                <button class="btn" onclick="goHome()">🏠 Back to Portfolio</button>
            </div>
        </div>
    </div>

    <script>
        // Game state
        let currentQuestion = 0;
        let score = 0;
        let timeLeft = 30;
        let timer = null;
        let selectedDifficulty = 'easy';
        let gameStartTime = null;
        let questions = [];
        let currentImageAttempt = 0;
        let imageCache = new Map();
        let currentCharacter = null;

        // Professional Image System Functions
        function preloadImages() {
            questions.forEach(question => {
                if (question.character && question.character.images) {
                    const images = question.character.images;
                    [images.primary, images.secondary, images.fallback].forEach(src => {
                        if (src && !imageCache.has(src)) {
                            const img = new Image();
                            img.onload = () => imageCache.set(src, true);
                            img.onerror = () => imageCache.set(src, false);
                            img.src = src;
                        }
                    });
                }
            });
        }

        function loadCharacterImage(character) {
            if (!character || !character.images) return;
            
            currentCharacter = character;
            currentImageAttempt = 0;
            
            // Show loading state
            showImageLoader();
            
            // Apply character theme
            applyCharacterTheme(character.theme);
            
            // Set tier badge
            setTierBadge(character.tier);
            
            // Attempt to load image
            attemptImageLoad();
        }

        function attemptImageLoad() {
            if (!currentCharacter || !currentCharacter.images) return;
            
            const images = currentCharacter.images;
            const imageSources = [images.primary, images.secondary, images.fallback];
            
            if (currentImageAttempt >= imageSources.length) {
                showImageError();
                return;
            }
            
            const currentSrc = imageSources[currentImageAttempt];
            const img = document.getElementById('characterImage');
            
            img.onload = function() {
                hideImageLoader();
                hideImageError();
                img.style.display = 'block';
                showHDIndicator();
            };
            
            img.onerror = function() {
                currentImageAttempt++;
                attemptImageLoad();
            };
            
            img.src = currentSrc;
        }

        function retryImageLoad() {
            currentImageAttempt = 0;
            hideImageError();
            showImageLoader();
            attemptImageLoad();
        }

        function showImageLoader() {
            document.getElementById('imageLoader').style.display = 'flex';
            document.getElementById('characterImage').style.display = 'none';
            document.getElementById('imageError').style.display = 'none';
            document.getElementById('hdIndicator').classList.remove('show');
        }

        function hideImageLoader() {
            document.getElementById('imageLoader').style.display = 'none';
        }

        function showImageError() {
            document.getElementById('imageLoader').style.display = 'none';
            document.getElementById('characterImage').style.display = 'none';
            document.getElementById('imageError').style.display = 'flex';
            document.getElementById('hdIndicator').classList.remove('show');
        }

        function hideImageError() {
            document.getElementById('imageError').style.display = 'none';
        }

        function showHDIndicator() {
            setTimeout(() => {
                document.getElementById('hdIndicator').classList.add('show');
            }, 300);
        }

        function applyCharacterTheme(theme) {
            const wrapper = document.querySelector('.image-wrapper');
            // Remove all existing theme classes
            wrapper.className = wrapper.className.replace(/character-theme-\S+/g, '');
            // Add new theme class
            if (theme) {
                wrapper.classList.add(`character-theme-${theme}`);
            }
        }

        function setTierBadge(tier) {
            const badge = document.getElementById('tierBadge');
            badge.textContent = tier || '';
            badge.className = 'tier-badge';
            
            if (tier === 'S+') {
                badge.classList.add('tier-s-plus');
            } else if (tier === 'S') {
                badge.classList.add('tier-s');
            } else if (tier === 'A') {
                badge.classList.add('tier-a');
            }
        }

        // Marvel Quiz Questions Database with Professional Image System
        const questionDatabase = {
            easy: [
                {
                    question: "What is the real name of Spider-Man?",
                    answers: ["Peter Parker", "Bruce Wayne", "Clark Kent", "Tony Stark"],
                    correct: 0,
                    character: {
                        name: "Spider-Man",
                        tier: "S+",
                        theme: "spider-man",
                        images: {
                            primary: "https://images.unsplash.com/photo-1635805737707-575885ab0820?w=400&h=400&fit=crop&crop=face",
                            secondary: "https://images.unsplash.com/photo-1566492031773-4f4e44671d66?w=400&h=400&fit=crop&crop=face",
                            fallback: "https://via.placeholder.com/400x400/dc143c/ffffff?text=Spider-Man"
                        }
                    }
                },
                {
                    question: "Which metal is associated with Wolverine's claws?",
                    answers: ["Vibranium", "Adamantium", "Titanium", "Steel"],
                    correct: 1,
                    character: {
                        name: "Wolverine",
                        tier: "S+",
                        theme: "wolverine",
                        images: {
                            primary: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=400&fit=crop&crop=face",
                            secondary: "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400&h=400&fit=crop&crop=face",
                            fallback: "https://via.placeholder.com/400x400/ffa500/ffffff?text=Wolverine"
                        }
                    }
                },
                {
                    question: "What is the name of Thor's hammer?",
                    answers: ["Stormbreaker", "Gungnir", "Mjolnir", "Hofund"],
                    correct: 2,
                    character: {
                        name: "Thor",
                        tier: "S+",
                        theme: "thor",
                        images: {
                            primary: "https://images.unsplash.com/photo-1566753323558-f4e0952af115?w=400&h=400&fit=crop&crop=face",
                            secondary: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=400&fit=crop&crop=face",
                            fallback: "https://via.placeholder.com/400x400/4169e1/ffffff?text=Thor"
                        }
                    }
                },
                {
                    question: "Who is the leader of the X-Men?",
                    answers: ["Wolverine", "Cyclops", "Professor X", "Storm"],
                    correct: 2,
                    character: {
                        name: "Professor X",
                        tier: "S",
                        theme: "captain-america",
                        images: {
                            primary: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face",
                            secondary: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&crop=face",
                            fallback: "https://via.placeholder.com/400x400/0052cc/ffffff?text=Professor+X"
                        }
                    }
                },
                {
                    question: "What is Captain America's shield made of?",
                    answers: ["Adamantium", "Titanium", "Vibranium", "Steel"],
                    correct: 2,
                    character: {
                        name: "Captain America",
                        tier: "S+",
                        theme: "captain-america",
                        images: {
                            primary: "https://images.unsplash.com/photo-1566753323558-f4e0952af115?w=400&h=400&fit=crop&crop=face",
                            secondary: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face",
                            fallback: "https://via.placeholder.com/400x400/0052cc/ffffff?text=Captain+America"
                        }
                    }
                },
                {
                    question: "Who is known as the 'Merc with a Mouth'?",
                    answers: ["Spider-Man", "Deadpool", "Wolverine", "Iron Man"],
                    correct: 1
                },
                {
                    question: "What is the Hulk's real name?",
                    answers: ["Bruce Banner", "Bruce Wayne", "Peter Parker", "Tony Stark"],
                    correct: 0
                },
                {
                    question: "Which Infinity Stone is red?",
                    answers: ["Power Stone", "Reality Stone", "Time Stone", "Space Stone"],
                    correct: 1
                },
                {
                    question: "What is the name of Black Widow's real name?",
                    answers: ["Natasha Romanoff", "Wanda Maximoff", "Carol Danvers", "Maria Hill"],
                    correct: 0
                },
                {
                    question: "Who is the king of Wakanda?",
                    answers: ["T'Chaka", "M'Baku", "T'Challa", "Shuri"],
                    correct: 2
                }
            ],
            medium: [
                {
                    question: "What is the name of the cosmic entity that devours planets?",
                    answers: ["Galactus", "Dormammu", "Eternity", "The Living Tribunal"],
                    correct: 0
                },
                {
                    question: "Which villain is known as the 'Master of Magnetism'?",
                    answers: ["Doctor Doom", "Magneto", "Loki", "Red Skull"],
                    correct: 1
                },
                {
                    question: "What is the real name of the Winter Soldier?",
                    answers: ["Steve Rogers", "Sam Wilson", "Bucky Barnes", "John Walker"],
                    correct: 2
                },
                {
                    question: "Which dimension does Doctor Strange protect Earth from?",
                    answers: ["Dark Dimension", "Quantum Realm", "Mirror Dimension", "Astral Plane"],
                    correct: 0
                },
                {
                    question: "What is the name of the Asgardian rainbow bridge?",
                    answers: ["Bifrost", "Heimdall", "Yggdrasil", "Valhalla"],
                    correct: 0
                },
                {
                    question: "Who created the Infinity Stones?",
                    answers: ["The Celestials", "The Watchers", "The Cosmic Entities", "The First Firmament"],
                    correct: 2
                },
                {
                    question: "What is the name of the Fantastic Four's headquarters?",
                    answers: ["Avengers Tower", "Baxter Building", "Xavier Mansion", "Sanctum Sanctorum"],
                    correct: 1
                },
                {
                    question: "Which mutant has the ability to absorb other mutants' powers?",
                    answers: ["Rogue", "Mystique", "Emma Frost", "Jean Grey"],
                    correct: 0
                },
                {
                    question: "What is the name of the symbiote that bonds with Spider-Man?",
                    answers: ["Carnage", "Toxin", "Venom", "Anti-Venom"],
                    correct: 2
                },
                {
                    question: "Who is the herald of Galactus?",
                    answers: ["Silver Surfer", "Nova", "Quasar", "Captain Marvel"],
                    correct: 0
                }
            ],
            hard: [
                {
                    question: "What is the real name of the villain known as Apocalypse?",
                    answers: ["En Sabah Nur", "Nathaniel Essex", "Victor Von Doom", "Max Eisenhardt"],
                    correct: 0
                },
                {
                    question: "Which cosmic entity represents Death in the Marvel Universe?",
                    answers: ["Eternity", "Infinity", "Lady Death", "Oblivion"],
                    correct: 2
                },
                {
                    question: "What is the name of the dimension where the Beyonder originates?",
                    answers: ["Beyond-Realm", "Outside", "The Beyond", "Beyonderland"],
                    correct: 0
                },
                {
                    question: "Who was the first host of the Phoenix Force?",
                    answers: ["Jean Grey", "Rachel Summers", "Emma Frost", "A primordial being"],
                    correct: 3
                },
                {
                    question: "What is the name of the cosmic cube that grants reality-warping powers?",
                    answers: ["Tesseract", "Cosmic Cube", "Reality Gem", "Infinity Cube"],
                    correct: 1
                },
                {
                    question: "Which Elder of the Universe is obsessed with games and contests?",
                    answers: ["The Collector", "The Grandmaster", "The Gardener", "The Runner"],
                    correct: 1
                },
                {
                    question: "What is the name of the pocket dimension created by Franklin Richards?",
                    answers: ["Counter-Earth", "Heroes Reborn", "Franklin's World", "Pocket Universe"],
                    correct: 1
                },
                {
                    question: "Who is the creator of the Sentinels?",
                    answers: ["Bolivar Trask", "William Stryker", "Henry Gyrich", "Sebastian Shaw"],
                    correct: 0
                },
                {
                    question: "What is the name of the alien race that the Skrulls are at war with?",
                    answers: ["Shi'ar", "Kree", "Badoon", "Brood"],
                    correct: 1
                },
                {
                    question: "Which character has the ability to manipulate probability?",
                    answers: ["Scarlet Witch", "Domino", "Longshot", "All of the above"],
                    correct: 3
                }
            ]
        };

        // Initialize difficulty selection
        document.addEventListener('DOMContentLoaded', function() {
            const difficultyBtns = document.querySelectorAll('.difficulty-btn');
            difficultyBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    difficultyBtns.forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedDifficulty = this.dataset.difficulty;
                });
            });
        });

        function startQuiz() {
            // Reset game state
            currentQuestion = 0;
            score = 0;
            gameStartTime = Date.now();
            
            // Get questions for selected difficulty
            questions = [...questionDatabase[selectedDifficulty]];
            
            // Shuffle questions
            questions = questions.sort(() => Math.random() - 0.5);
            
            // Preload images for performance
            preloadImages();
            
            // Show game screen
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            // Load first question
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                endQuiz();
                return;
            }
            
            const question = questions[currentQuestion];
            
            // Update UI
            document.getElementById('questionCounter').textContent = `${currentQuestion + 1}/${questions.length}`;
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentScore').textContent = score;
            
            // Load character image if available
            if (question.character) {
                loadCharacterImage(question.character);
            }
            
            // Create answer buttons
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => selectAnswer(index);
                answersGrid.appendChild(button);
            });
            
            // Reset and start timer
            timeLeft = 30;
            startTimer();
            
            // Hide next button
            document.getElementById('nextBtn').style.display = 'none';
        }

        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestion];
            const answerBtns = document.querySelectorAll('.answer-btn');
            
            // Disable all buttons
            answerBtns.forEach(btn => btn.onclick = null);
            
            // Show correct/incorrect
            answerBtns.forEach((btn, index) => {
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex) {
                    btn.classList.add('incorrect');
                }
            });
            
            // Update score
            if (selectedIndex === question.correct) {
                score++;
                document.getElementById('currentScore').textContent = score;
            }
            
            // Stop timer
            clearInterval(timer);
            
            // Show next button
            document.getElementById('nextBtn').style.display = 'block';
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function startTimer() {
            clearInterval(timer);
            
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timeLeft').textContent = `${timeLeft}s`;
                
                // Update timer bar
                const percentage = (timeLeft / 30) * 100;
                document.getElementById('timerFill').style.width = `${percentage}%`;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    selectAnswer(-1); // Auto-select wrong answer
                }
            }, 1000);
        }

        function endQuiz() {
            const gameEndTime = Date.now();
            const totalTime = Math.floor((gameEndTime - gameStartTime) / 1000);
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            
            // Calculate results
            const accuracy = Math.round((score / questions.length) * 100);
            
            // Show results screen
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            // Update results
            document.getElementById('finalScore').textContent = `${score}/${questions.length}`;
            document.getElementById('correctCount').textContent = score;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            document.getElementById('timeTaken').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            
            // Set message based on performance
            let message = "";
            if (accuracy >= 90) {
                message = "🏆 Incredible! You're a true Marvel expert!";
            } else if (accuracy >= 70) {
                message = "🎉 Excellent work, True Believer!";
            } else if (accuracy >= 50) {
                message = "👍 Good job! Keep studying the Marvel Universe!";
            } else {
                message = "📚 Time to brush up on your Marvel knowledge!";
            }
            
            document.getElementById('resultsMessage').textContent = message;
        }

        function restartQuiz() {
            // Reset to start screen
            document.getElementById('resultsScreen').classList.add('hidden');
            document.getElementById('startScreen').classList.remove('hidden');
            
            // Clear any running timers
            clearInterval(timer);
        }

        function goHome() {
            // Navigate back to portfolio
            window.location.href = '../index.html';
        }
    </script>
</body>
</html>